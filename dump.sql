--
-- PostgreSQL database dump
--

-- Dumped from database version 12.5 (Ubuntu 12.5-0ubuntu0.20.04.1)
-- Dumped by pg_dump version 12.5 (Ubuntu 12.5-0ubuntu0.20.04.1)

-- Started on 2021-02-07 18:41:06 +03

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 203 (class 1259 OID 16418)
-- Name: film; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.film (
    id bigint NOT NULL,
    name character varying(255)
);


ALTER TABLE public.film OWNER TO postgres;

--
-- TOC entry 202 (class 1259 OID 16416)
-- Name: film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.film ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.film_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 205 (class 1259 OID 16425)
-- Name: review; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.review (
    id bigint NOT NULL,
    created_at timestamp without time zone,
    rate integer NOT NULL,
    film_id bigint,
    usr_id bigint,
    CONSTRAINT rate CHECK (((rate > 0) AND (rate < 6)))
);


ALTER TABLE public.review OWNER TO postgres;

--
-- TOC entry 204 (class 1259 OID 16423)
-- Name: review_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.review ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.review_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 207 (class 1259 OID 16432)
-- Name: usr; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.usr (
    id bigint NOT NULL,
    name character varying(255)
);


ALTER TABLE public.usr OWNER TO postgres;

--
-- TOC entry 206 (class 1259 OID 16430)
-- Name: usr_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.usr ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.usr_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 2980 (class 0 OID 16418)
-- Dependencies: 203
-- Data for Name: film; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.film (id, name) FROM stdin;
1	Бешенные псы
2	Криминальное чтиво
3	Убить Билла
4	Убить Билла 2
5	Джанго освобожденный
6	Однажды в Голливуде
10	Доггвиль
\.


--
-- TOC entry 2982 (class 0 OID 16425)
-- Dependencies: 205
-- Data for Name: review; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.review (id, created_at, rate, film_id, usr_id) FROM stdin;
2	2021-02-06 10:55:43.166576	4	2	1
3	2021-02-06 10:55:48.000962	5	3	1
4	2021-02-06 10:55:52.689162	3	4	1
5	2021-02-06 10:55:57.180905	3	5	1
6	2021-02-06 10:55:59.943259	5	6	1
8	2021-02-06 14:40:56.468914	5	1	2
9	2021-02-06 14:41:08.13988	4	2	2
10	2021-02-06 14:41:11.903312	5	3	2
11	2021-02-06 14:41:15.867935	3	4	2
12	2021-02-06 14:41:21.725685	4	5	2
13	2021-02-06 14:41:27.095022	3	6	2
14	2021-02-06 14:41:32.558253	5	10	2
15	2021-02-06 14:41:42.332097	2	10	3
16	2021-02-06 14:41:48.560654	4	6	3
17	2021-02-06 14:41:52.124267	5	5	3
18	2021-02-06 14:41:56.255025	5	4	3
19	2021-02-06 14:42:00.908049	4	3	3
20	2021-02-06 14:42:06.561278	3	2	3
21	2021-02-06 14:42:09.269664	5	1	3
23	2021-02-07 14:36:01.743	5	1	1
\.


--
-- TOC entry 2984 (class 0 OID 16432)
-- Dependencies: 207
-- Data for Name: usr; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.usr (id, name) FROM stdin;
1	Igor Pomazkov
2	Adam Frater
3	Adam Snake
\.


--
-- TOC entry 2990 (class 0 OID 0)
-- Dependencies: 202
-- Name: film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.film_id_seq', 10, true);


--
-- TOC entry 2991 (class 0 OID 0)
-- Dependencies: 204
-- Name: review_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.review_id_seq', 23, true);


--
-- TOC entry 2992 (class 0 OID 0)
-- Dependencies: 206
-- Name: usr_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.usr_id_seq', 3, true);


--
-- TOC entry 2846 (class 2606 OID 16422)
-- Name: film film_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.film
    ADD CONSTRAINT film_pkey PRIMARY KEY (id);


--
-- TOC entry 2848 (class 2606 OID 16429)
-- Name: review review_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.review
    ADD CONSTRAINT review_pkey PRIMARY KEY (id);


--
-- TOC entry 2850 (class 2606 OID 16436)
-- Name: usr usr_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usr
    ADD CONSTRAINT usr_pkey PRIMARY KEY (id);


--
-- TOC entry 2852 (class 2606 OID 16442)
-- Name: review fk23qdwh607worflr5x3m7ob3b6; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.review
    ADD CONSTRAINT fk23qdwh607worflr5x3m7ob3b6 FOREIGN KEY (usr_id) REFERENCES public.usr(id);


--
-- TOC entry 2851 (class 2606 OID 16437)
-- Name: review fkloj6cgl63e2nd5ykk8gvlu15b; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.review
    ADD CONSTRAINT fkloj6cgl63e2nd5ykk8gvlu15b FOREIGN KEY (film_id) REFERENCES public.film(id);


-- Completed on 2021-02-07 18:41:06 +03

--
-- PostgreSQL database dump complete
--

